{% extends 'base.html' %}
{% block title %}Reservar {{ item.nome }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    {% if item.imagem %}
    <img src="{{ item.imagem.url }}" alt="{{ item.nome }}" class="w-full h-96 object-cover rounded-lg mb-6">
    {% endif %}

    <h2 class="text-3xl font-bold mb-6 text-amber-700">{{ item.nome }}</h2>

    <div class="mb-6">
        <p class="text-gray-700 mb-2">
            <span class="font-semibold">DisponÃ­vel:</span>
            {% if item.estoque > 0 %}
                <span class="text-green-600 text-lg">{{ item.estoque }} unidades</span>
            {% else %}
                <span class="text-red-600 text-lg">Esgotado</span>
            {% endif %}
        </p>
    </div>

    {% if item.quantidade_estoque > 0 %}
    <form method="POST" action="{% url 'item_reserve' item.id %}" class="space-y-4">
        {% csrf_token %}

        <div>
            <label for="nome_cliente" class="block text-sm font-medium text-gray-700 mb-2">Seu Nome</label>
            <input type="text" id="nome_cliente" name="nome_cliente" required
                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                   placeholder="Digite seu nome completo">
        </div>

        <div>
            <label for="quantidade" class="block text-sm font-medium text-gray-700 mb-2">Quantidade</label>
            <input type="number" id="quantidade" name="quantidade" min="1" max="{{ item.quantidade_estoque }}" value="1" required
                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
        </div>

        <div class="flex gap-4 mt-6">
            <button type="submit" class="flex-1 bg-amber-600 text-white px-6 py-3 rounded-lg hover:bg-amber-700 font-semibold transition">
                Confirmar Reserva
            </button>
            <a href="{% url 'item_list' %}" class="flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 text-center font-semibold transition">
                Voltar
            </a>
        </div>
    </form>
    {% else %}
    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
        <p class="text-red-700">Este item estÃ¡ esgotado no momento.</p>
    </div>
    <div class="flex gap-4">
        <a href="{% url 'item_notify' item.id %}" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 text-center font-semibold">
            ðŸ”” Me avise quando voltar
        </a>
        <a href="{% url 'item_list' %}" class="flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 text-center font-semibold">
            Voltar
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
